<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="AAPE - Associação de Apoio à Pessoa com Epilepsia. Epilepsia não define ninguém. Estamos aqui pra lembrar disso todos os dias." name="description"/>
<title>AAPE - Associação de Apoio à Pessoa com Epilepsia</title>
<!-- Favicon -->
<link rel="icon" href="public/logo-aape.png" type="image/png">
<link rel="shortcut icon" href="public/logo-aape.png" type="image/png">
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet"/>
<link href="styles.css" rel="stylesheet"/>
<style>
    /* Estilo para o botão flutuante de WhatsApp */
    .whatsapp-float {
        position: fixed;
        width: 60px;
        height: 60px;
        bottom: 40px;
        right: 40px;
        background-color: #5E117D;
        color: #FFF;
        border-radius: 50px;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 100;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .whatsapp-float:hover {
        background-color: #4a0e63;
        transform: scale(1.05);
    }

    @media screen and (max-width: 767px) {
        .whatsapp-float {
            width: 50px;
            height: 50px;
            bottom: 20px;
            right: 20px;
        }
    }

    /* Loading indicator for news */
    .loading-indicator {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        width: 100%;
        text-align: center;
        color: #5E117D;
    }
    
    .loading-indicator p {
        margin-top: 1rem;
        font-weight: 500;
    }
    
    /* Error message */
    .error-message {
        padding: 2rem;
        text-align: center;
        color: #e74c3c;
        background-color: rgba(231, 76, 60, 0.1);
        border-radius: 8px;
        margin: 1rem 0;
        width: 100%;
    }
    
    /* No news message */
    .no-news {
        padding: 2rem;
        text-align: center;
        color: #555;
        background-color: rgba(0, 0, 0, 0.05);
        border-radius: 8px;
        margin: 1rem 0;
        width: 100%;
    }
    
    /* Modal author style */
    .modal-author {
        margin-top: 1.5rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        font-style: italic;
    }
</style>
</head>
<body>
<!-- Header -->
<header class="header" id="header">
<div class="container">
<div class="header-content">
<!-- Logo -->
<div class="logo">
<div class="logo-icon">
<img alt="AAPE Logo" class="logo-image" src="public/logo-aape.png" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'"/>
<div class="logo-fallback" style="display: none; width: 48px; height: 48px; background: #5E117D; border-radius: 50%; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.5rem;">A</div>
</div>
<div class="logo-text">
<h1>AAPE</h1>
<p>Apoio à pessoa com epilepsia</p>
</div>
</div>
<!-- Desktop Navigation -->
<nav class="nav-desktop">
<a class="nav-link" href="#nosso-jeito">Nosso jeito</a>
<a class="nav-link" href="#acreditamos">Acreditamos</a>
<a class="nav-link" href="#parceiros">Parceiros</a>
<a class="nav-link" href="#noticias">Notícias</a>
<a class="nav-link" href="#agenda">Agenda</a>
<a class="nav-link" href="#contato">Contato</a>
</nav>
<!-- Social Icons -->
<div class="header-actions">
<div class="social-icons">
<a href="https://www.instagram.com/aape.ipatinga/" target="_blank" title="Siga a AAPE no Instagram">
<svg fill="currentColor" height="18" viewbox="0 0 24 24" width="18">
<path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
</svg>
</a>
</div>
</div>
<!-- Mobile Menu Button -->
<button class="mobile-menu-btn" id="mobileMenuBtn">
<svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
<line x1="3" x2="21" y1="6" y2="6"></line>
<line x1="3" x2="21" y1="12" y2="12"></line>
<line x1="3" x2="21" y1="18" y2="18"></line>
</svg>
</button>
</div>
<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
<nav class="mobile-nav">
<a class="mobile-nav-link" href="#nosso-jeito">Nosso jeito</a>
<a class="mobile-nav-link" href="#acreditamos">Acreditamos</a>
<a class="mobile-nav-link" href="#parceiros">Parceiros</a>
<a class="mobile-nav-link" href="#noticias">Notícias</a>
<a class="mobile-nav-link" href="#agenda">Agenda</a>
<a class="mobile-nav-link" href="#contato">Contato</a>
</nav>
</div>
</div>
</header>
<!-- Hero Section -->
<section class="hero" id="hero">
<div class="container">
<div class="hero-content animate-on-scroll">
<h1 class="hero-title">
<span class="text-purple">Epilepsia</span> não define 
                    <span class="text-purple">ninguém</span>
</h1>
<p class="hero-subtitle">
                    Estamos aqui pra lembrar disso todos os dias. Juntos, construímos uma comunidade de apoio, 
                    informação e acolhimento para pessoas com epilepsia e suas famílias.
                </p>
</div>
<!-- Call to Action Cards -->
<div class="cta-grid">
<div class="cta-card animate-on-scroll" data-delay="100">
<div class="cta-icon">
<svg fill="none" height="32" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="32">
<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
</svg>
</div>
<h3>Quero ajudar</h3>
<p>Seja parte da nossa rede. Doe tempo, talento ou compartilhe informação.</p>
</div>
<div class="cta-card animate-on-scroll" data-delay="200">
<div class="cta-icon">
<svg fill="none" height="32" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="32">
<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
<circle cx="9" cy="7" r="4"></circle>
<path d="m22 21-3-3"></path>
</svg>
</div>
<h3>Preciso de apoio</h3>
<p>Você não está só. Conte com a gente pra ouvir, orientar e acolher.</p>
</div>
<div class="cta-card animate-on-scroll" data-delay="300">
<div class="cta-icon">
<svg fill="none" height="32" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="32">
<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
<path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
</svg>
</div>
<h3>Quero saber mais</h3>
<p>Entenda tudo sobre epilepsia, sem tabus e com informação clara.</p>
</div>
<div class="cta-card animate-on-scroll" data-delay="400">
<div class="cta-icon">
<svg fill="none" height="32" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="32">
<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
</svg>
</div>
<h3>Ver notícias</h3>
<p>Fique por dentro das novidades e informações importantes.</p>
</div>
</div>
</div>
</section>
<!-- Nosso Jeito Section -->
<section class="nosso-jeito" id="nosso-jeito">
<div class="container">
<div class="section-header animate-on-scroll">
<h2>Nosso jeito</h2>
<div class="section-divider"></div>
</div>
<div class="quote-card animate-on-scroll">
<h3>"Epilepsia não define ninguém. Estamos aqui pra lembrar disso todos os dias."</h3>
</div>
<div class="content-card animate-on-scroll">
<p>
                    Na AAPE, acreditamos que cada pessoa é única e especial, independentemente das condições que possam enfrentar. 
                    Nossa missão vai além do apoio médico ou informativo – somos uma família que se dedica a mostrar que a epilepsia 
                    é apenas uma pequena parte da vida de uma pessoa, não sua definição completa.
                </p>
<p>
                    Nosso jeito é acolher sem julgamento, informar sem assustar, e apoiar sem limitar. Criamos um espaço onde 
                    pessoas com epilepsia, familiares e amigos podem se conectar, compartilhar experiências e encontrar força na 
                    comunidade. Porque quando estamos juntos, somos mais fortes.
                </p>
<p>
                    Trabalhamos todos os dias para quebrar preconceitos, espalhar conhecimento e mostrar que uma vida plena 
                    e feliz é possível para todos. Este é o nosso jeito: com amor, respeito e muita esperança no futuro.
                </p>
</div>
</div>
</section>
<!-- Acreditamos Section -->
<section class="acreditamos" id="acreditamos">
<div class="container">
<div class="section-header animate-on-scroll">
<h2>No que acreditamos</h2>
<div class="section-divider"></div>
<p>Nossos valores guiam cada ação e decisão que tomamos na AAPE</p>
</div>
<div class="valores-layout">
<!-- Valor em destaque - 100% width -->
<div class="valor-featured animate-on-scroll" data-delay="100">
<div class="valor-icon">
<svg fill="none" height="48" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="48">
<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
</svg>
</div>
<div class="valor-content">
<h3>Cuidar</h3>
<p>Somos uma associação de referência no apoio às pessoas com epilepsia, seus familiares e a comunidade em geral. Oferecemos acolhimento, orientações, escuta qualificada e suporte emocional, além de rodas de conversa, terapias individuais, atividades educativas, profissionalizantes, terapêuticas, oficinas artísticas e culturais, palestras educativas e participação em eventos voltados para a saúde.</p>
</div>
</div>
<!-- Grid dos outros valores -->
<div class="valores-grid">
<div class="valor-card animate-on-scroll" data-delay="200">
<div class="valor-icon">
<svg fill="none" height="32" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="32">
<circle cx="12" cy="12" r="10"></circle>
<path d="M12 16v-4"></path>
<path d="M12 8h.01"></path>
</svg>
</div>
<h3>Informar</h3>
<p>Compartilhamos conhecimento claro e acessível sobre epilepsia, desmistificando tabus e preconceitos.</p>
</div>
<div class="valor-card animate-on-scroll" data-delay="300">
<div class="valor-icon">
<svg fill="none" height="32" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="32">
<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
<circle cx="9" cy="7" r="4"></circle>
<path d="m22 21-3-3"></path>
</svg>
</div>
<h3>Abraçar</h3>
<p>Criamos uma comunidade acolhedora onde ninguém se sente sozinho em sua jornada.</p>
</div>
<div class="valor-card animate-on-scroll" data-delay="400">
<div class="valor-icon">
<svg fill="none" height="32" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="32">
<path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
</svg>
</div>
<h3>Viver sem rótulos</h3>
<p>Promovemos uma vida plena e livre de estigmas, onde cada pessoa pode ser simplesmente quem é.</p>
</div>
</div>
</div>
</div>
</section>
<!-- Mundo que Queremos Section -->
<section class="mundo-queremos">
<div class="container">
<div class="section-header animate-on-scroll">
<h2>O mundo que queremos</h2>
<div class="section-divider"></div>
</div>
<div class="mundo-content animate-on-scroll">
<p class="mundo-intro">
                    Sonhamos com um mundo onde cada pessoa com epilepsia possa viver com total
                </p>
<div class="mundo-grid">
<div class="mundo-card">
<h3>LIBERDADE</h3>
<p>Para ser quem realmente é</p>
</div>
<div class="mundo-card">
<h3>DIGNIDADE</h3>
<p>Em todas as suas escolhas</p>
</div>
<div class="mundo-card">
<h3>RESPEITO</h3>
<p>Por sua individualidade</p>
</div>
</div>
<p class="mundo-description">
                    Um mundo onde a epilepsia seja compreendida, onde o preconceito não exista, 
                    e onde cada pessoa possa perseguir seus sonhos sem limitações impostas pela ignorância. 
                    Este é o futuro que construímos juntos, um dia de cada vez.
                </p>
</div>
</div>
</section>
<!-- Faça Parte Section -->
<section class="faca-parte">
<div class="container">
<div class="section-header animate-on-scroll">
<h2>Faça parte</h2>
<div class="section-divider"></div>
<p>Existem várias maneiras de se juntar à nossa missão. Escolha a forma que mais combina com você!</p>
</div>
<div class="acoes-grid">
<div class="acao-card animate-on-scroll" data-delay="100">
<div class="acao-icon blue">
<svg fill="none" height="48" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="48">
<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
<path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
</svg>
</div>
<h3>Aprender</h3>
<p>Participe de oficinas terapêuticas, artísticas, culturais, profissionais, rodas de conversa, palestras e estudos sobre epilepsia. Conhecimento é poder.</p>
</div>
<div class="acao-card animate-on-scroll" data-delay="200">
<div class="acao-icon green">
<svg fill="none" height="48" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="48">
<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
<circle cx="9" cy="7" r="4"></circle>
<path d="m22 21-3-3"></path>
</svg>
</div>
<h3>Apoiar</h3>
<p>Seja voluntário, participe de grupos de apoio e ajude outras pessoas na mesma jornada.</p>
</div>
<div class="acao-card animate-on-scroll" data-delay="300">
<div class="acao-icon purple">
<svg fill="none" height="48" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="48">
<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
</svg>
</div>
<h3>Compartilhar</h3>
<p>Divulgue informações sobre epilepsia e ajude a quebrar preconceitos em sua comunidade.</p>
</div>
</div>
</div>
</section>
<!-- Parceiros Section -->
<section class="parceiros" id="parceiros">
<div class="container">
<div class="section-header animate-on-scroll">
<h2>Parceiros</h2>
<div class="section-divider"></div>
<p>Juntos somos mais fortes. Conheça as organizações que apoiam nossa missão e tornam possível o trabalho da AAPE na comunidade.</p>
</div>
<div class="parceiros-carousel-container animate-on-scroll">
<div class="parceiros-carousel" id="parceirosCarousel">
<div class="parceiro-slide">Prefeitura de Ipatinga</div>
<div class="parceiro-slide">Câmara municipal de Ipatinga</div>
<div class="parceiro-slide">AAPI - Associação dos aposentados de Ipatinga</div>
<div class="parceiro-slide">ACCEF - Associação centro de convivência espaço da família</div>
<div class="parceiro-slide">Associação loucos por você</div>
<div class="parceiro-slide">Banco de alimentos de Ipatinga</div>
<div class="parceiro-slide">Clínica monte sinai</div>
<div class="parceiro-slide">Dr. Juliano de menezes</div>
<div class="parceiro-slide">Dr. Leonardo condé</div>
<div class="parceiro-slide">Dr. Wesley moreira vieira</div>
<div class="parceiro-slide">Duda móveis</div>
<div class="parceiro-slide">Fadipa</div>
<div class="parceiro-slide">Farmácia indiana</div>
<div class="parceiro-slide">Medeiros cabeleireiros</div>
<div class="parceiro-slide">Mulheres embaixo da árvore</div>
<div class="parceiro-slide">Point do jeans</div>
<div class="parceiro-slide">Projeto dorcas</div>
</div>
<div class="carousel-controls"> </div>
</div>
</div>
</section>
<!-- Notícias Section -->
<section class="noticias" id="noticias">
<div class="container">
<div class="section-header animate-on-scroll">
<h2>Novidades & saberes</h2>
<div class="section-divider"></div>
<p>Fique por dentro das últimas novidades, pesquisas e informações importantes sobre epilepsia.</p>
</div>
<div class="noticias-carousel-container animate-on-scroll">
<div class="scroll-indicator">
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M9 18l6-6-6-6"></path>
</svg>
Deslize para ver mais notícias
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M15 18l-6-6 6-6"></path>
</svg>
</div>
<div class="noticias-carousel" id="noticiasCarousel">
<!-- Dynamic news will be loaded here -->
<div id="loading-news" class="loading-indicator">
    <svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#5E117D">
        <g fill="none" fill-rule="evenodd">
            <g transform="translate(1 1)" stroke-width="2">
                <circle stroke-opacity=".5" cx="18" cy="18" r="18"/>
                <path d="M36 18c0-9.94-8.06-18-18-18">
                    <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"/>
                </path>
            </g>
        </g>
    </svg>
    <p>Carregando notícias...</p>
</div>
</div>
<!-- ...existing code... -->

<!-- Add before the closing body tag -->
<script>
// Store news data globally for modal access
let newsData = [];

// Function to fetch news from Google Sheets
async function fetchNews() {
    try {
        const response = await fetch('https://script.google.com/macros/s/AKfycby8U7VqPva3ymAQBLGJCWo0cp6thk9znVs5H2PEtaDFcv-Hedcswfrq7LcejRAQv7SS/exec');
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error fetching news:', error);
        return [];
    }
}

// Function to format date from Google Sheets
function formatDate(dateString) {
    if (!dateString) return '';
    
    try {
        // If dateString is already in DD/MM/YYYY format
        if (typeof dateString === 'string' && dateString.includes('/')) {
            const parts = dateString.split('/');
            const day = parts[0];
            const month = parts[1];
            const year = parts[2];
            
            // Convert month number to month name in Portuguese
            const monthNames = [
                'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
            ];
            
            return `${day} de ${monthNames[parseInt(month) - 1]}, ${year}`;
        } 
        
        // If dateString is a date object or a different format
        const date = new Date(dateString);
        if (isNaN(date.getTime())) return dateString; // Return as is if invalid date
        
        const day = date.getDate();
        const month = date.getMonth();
        const year = date.getFullYear();
        
        const monthNames = [
            'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
            'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
        ];
        
        return `${day} de ${monthNames[month]}, ${year}`;
    } catch (e) {
        console.error('Error formatting date:', e);
        return dateString; // Return original string if formatting fails
    }
}

// Function to create news cards
function createNewsCard(news, index) {
    // Determine category based on content or set a default
    const categories = ['Direitos', 'Educação', 'Apoio', 'Pesquisa', 'Voluntariado', 'Tecnologia', 'Evento'];
    const category = news.categoria || categories[index % categories.length];
    
    // Use provided image URL or a default placeholder
    const imageUrl = news.imagem_url || `https://picsum.photos/600/400?random=${index}`;
    
    return `
    <article class="noticia-card" data-noticia="${news.ID || index + 1}">
        <div class="noticia-image">
            <img alt="${news.titulo}" src="${imageUrl}" onerror="this.src='https://picsum.photos/600/400?random=${index}'"/>
            <span class="noticia-categoria">${category}</span>
        </div>
        <div class="noticia-content">
            <div class="noticia-date">
                <svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
                    <rect height="18" rx="2" ry="2" width="18" x="3" y="4"></rect>
                    <line x1="16" x2="16" y1="2" y2="6"></line>
                    <line x1="8" x2="8" y1="2" y2="6"></line>
                    <line x1="3" x2="21" y1="10" y2="10"></line>
                </svg>
                ${formatDate(news.data)}
            </div>
            <h3>${news.titulo}</h3>
            <p>${news.subtitulo || news.conteudo.substring(0, 120) + '...'}</p>
            <button class="btn-link" onclick="openNewsModal('${news.ID || index + 1}')">
                <svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ler mais
            </button>
        </div>
    </article>`;
}

// Function to open news modal with dynamic content
function openNewsModal(id) {
    const news = newsData.find(item => String(item.ID) === String(id));
    if (!news) return;
    
    document.getElementById('modalTitle').textContent = news.titulo;
    document.getElementById('modalDate').textContent = formatDate(news.data);
    document.getElementById('modalCategory').textContent = news.categoria || 'Notícia';
    document.getElementById('modalImage').src = news.imagem_url || `https://picsum.photos/800/400?random=${id}`;
    document.getElementById('modalImage').alt = news.titulo;
    
    // Format content with paragraphs
    const content = news.conteudo.split('\n').map(p => `<p>${p}</p>`).join('');
    document.getElementById('modalContent').innerHTML = content;
    
    // Add author if available
    if (news.autor) {
        const authorElement = document.createElement('div');
        authorElement.classList.add('modal-author');
        authorElement.innerHTML = `<p><strong>Por:</strong> ${news.autor}</p>`;
        document.getElementById('modalContent').appendChild(authorElement);
    }
    
    document.getElementById('noticiaModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

// Initialize news from Google Sheets
async function initNews() {
    const carousel = document.getElementById('noticiasCarousel');
    
    try {
        // Fetch news from Google Sheets
        const data = await fetchNews();
        
        // Filter only published news
        newsData = data.filter(item => {
            return item.Publicado === true || 
                   item.Publicado === 'TRUE' || 
                   item.Publicado === 'true' || 
                   item.Publicado === 'sim' || 
                   item.Publicado === 'Sim' || 
                   item.Publicado === 'SIM' || 
                   item.Publicado === '1';
        });
        
        // Clear loading indicator
        document.getElementById('loading-news').style.display = 'none';
        
        // Check if we have news
        if (newsData.length === 0) {
            carousel.innerHTML = '<div class="no-news">Não há notícias disponíveis no momento.</div>';
            return;
        }
        
        // Generate HTML for each news card
        const newsHTML = newsData.map((news, index) => createNewsCard(news, index)).join('');
        
        // Add news cards to carousel
        carousel.innerHTML += newsHTML;
        
    } catch (error) {
        console.error('Error initializing news:', error);
        document.getElementById('loading-news').style.display = 'none';
        carousel.innerHTML += '<div class="error-message">Não foi possível carregar as notícias. Por favor, tente novamente mais tarde.</div>';
    }
}

// Add event listener to run when the DOM is fully loaded
document.addEventListener('DOMContentLoaded', function() {
    // Initialize news from Google Sheets
    initNews();
    
    // Add event listener for modal close button
    document.getElementById('modalClose').addEventListener('click', function() {
        document.getElementById('noticiaModal').classList.remove('active');
        document.body.style.overflow = 'auto';
    });
    
    // Close modal when clicking outside of it
    document.getElementById('noticiaModal').addEventListener('click', function(e) {
        if (e.target === this) {
            this.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    });
});

// Make openNewsModal available globally
window.openNewsModal = openNewsModal;
</script>

<!-- Modal para Notícias -->
<div class="modal" id="noticiaModal">
<div class="modal-content">
<div class="modal-header">
<h2 id="modalTitle"></h2>
<button class="modal-close" id="modalClose">
<svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
<line x1="18" x2="6" y1="6" y2="18"></line>
<line x1="6" x2="18" y1="6" y2="18"></line>
</svg>
</button>
</div>
<div class="modal-body">
<img alt="" id="modalImage" src=""/>
<div class="modal-meta">
<span id="modalDate"></span>
<span id="modalCategory"></span>
</div>
<div id="modalContent"></div>
</div>
</div>
</div>
<!-- Modal para Eventos -->
<div class="modal" id="eventosModal">
<div class="modal-content">
<div class="modal-header">
<h2>Todos os eventos</h2>
<button class="modal-close" id="eventosModalClose">
<svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
<line x1="18" x2="6" y1="6" y2="18"></line>
<line x1="6" x2="18" y1="6" y2="18"></line>
</svg>
</button>
</div>
<div class="modal-body">
<div class="eventos-modal-list">
<div class="evento-modal-card">
<div class="evento-modal-date">
<div class="date-day">JUL</div>
<div class="date-month">2025</div>
</div>
<div class="evento-modal-content">
<span class="evento-categoria">Apoio</span>
<h3>Roda de conversa sobre epilepsia</h3>
<p>Encontro para compartilhar experiências e fortalecer nossa comunidade.</p>
<div class="evento-modal-location">
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
<circle cx="12" cy="10" r="3"></circle>
</svg>
                                Sede da AAPE, rua Naum, nº 235 – Canaãzinho - Ipatinga/MG
                            </div>
<a class="btn-primary" href="https://wa.me/5531982062772?text=Olá! Gostaria de saber mais sobre a Roda de conversa sobre epilepsia" target="_blank">
                                Saiba mais
                            </a>
</div>
</div>
<div class="evento-modal-card">
<div class="evento-modal-date">
<div class="date-day">AGO</div>
<div class="date-month">2025</div>
</div>
<div class="evento-modal-content">
<span class="evento-categoria">Educação</span>
<h3>Campanha de conscientização nas escolas</h3>
<p>Atividades educativas em escolas públicas e privadas para conscientização sobre epilepsia.</p>
<div class="evento-modal-location">
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
<circle cx="12" cy="10" r="3"></circle>
</svg>
                                Escolas públicas e privadas de Ipatinga
                            </div>
<a class="btn-primary" href="https://wa.me/5531982062772?text=Olá! Gostaria de saber mais sobre a Campanha de conscientização nas escolas" target="_blank">
                                Saiba mais
                            </a>
</div>
</div>
<div class="evento-modal-card">
<div class="evento-modal-date">
<div class="date-day">SET</div>
<div class="date-month">2025</div>
</div>
<div class="evento-modal-content">
<span class="evento-categoria">Evento</span>
<h3>Epilepsia sem tabu</h3>
<p>Palestras, rodas de conversa e atrações culturais para quebrar preconceitos sobre epilepsia.</p>
<div class="evento-modal-location">
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
<circle cx="12" cy="10" r="3"></circle>
</svg>
                                Local a ser definido
                            </div>
<a class="btn-primary" href="https://wa.me/5531982062772?text=Olá! Gostaria de saber mais sobre o evento Epilepsia sem tabu" target="_blank">
                                Saiba mais
                            </a>
</div>
</div>
<div class="evento-modal-card">
<div class="evento-modal-date">
<div class="date-day">OUT</div>
<div class="date-month">2025</div>
</div>
<div class="evento-modal-content">
<span class="evento-categoria">Saúde</span>
<h3>Palestra sobre primeiros socorros</h3>
<p>Aprenda como agir durante uma crise epiléptica e outros primeiros socorros básicos.</p>
<div class="evento-modal-location">
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
<circle cx="12" cy="10" r="3"></circle>
</svg>
                                Auditório da Prefeitura de Ipatinga
                            </div>
<a class="btn-primary" href="https://wa.me/5531982062772?text=Olá! Gostaria de saber mais sobre a Palestra sobre primeiros socorros" target="_blank">
                                Saiba mais
                            </a>
</div>
</div>
<div class="evento-modal-card">
<div class="evento-modal-date">
<div class="date-day">NOV</div>
<div class="date-month">2025</div>
</div>
<div class="evento-modal-content">
<span class="evento-categoria">Cultura</span>
<h3>Festival de talentos AAPE</h3>
<p>Evento cultural com apresentações artísticas de pessoas com epilepsia e suas famílias.</p>
<div class="evento-modal-location">
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
<circle cx="12" cy="10" r="3"></circle>
</svg>
                                Centro Cultural de Ipatinga
                            </div>
<a class="btn-primary" href="https://wa.me/5531982062772?text=Olá! Gostaria de saber mais sobre o Festival de talentos AAPE" target="_blank">
                                Saiba mais
                            </a>
</div>
</div>
<div class="evento-modal-card">
<div class="evento-modal-date">
<div class="date-day">DEZ</div>
<div class="date-month">2025</div>
</div>
<div class="evento-modal-content">
<span class="evento-categoria">Confraternização</span>
<h3>Festa de fim de ano AAPE</h3>
<p>Confraternização de fim de ano com toda a comunidade AAPE, familiares e amigos.</p>
<div class="evento-modal-location">
<svg fill="none" height="16" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="16">
<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
<circle cx="12" cy="10" r="3"></circle>
</svg>
                                Sede da AAPE
                            </div>
<a class="btn-primary" href="https://wa.me/5531982062772?text=Olá! Gostaria de saber mais sobre a Festa de fim de ano AAPE" target="_blank">
                                Saiba mais
                            </a>
</div>
</div>
</div>
</div>
</div>
</div>
<script defer="defer" src="script.js"></script>
<!-- WhatsApp Float Button -->
<a href="https://wa.me/5531982062772" class="whatsapp-float" target="_blank" title="Fale conosco pelo WhatsApp">
    <svg fill="currentColor" height="24" width="24" viewBox="0 0 24 24">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
    </svg>
</a>
</body>
</html>